<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>[WPF] Créer des styles paramétrables à l&#39;aide des propriétés attachées - Blog .NET de Thomas Levesque</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="[WPF] Créer des styles paramétrables à l&#39;aide des propriétés attachées" />
<meta property="og:description" content="Je voudrais aujourd&rsquo;hui partager avec vous une petite astuce que j&rsquo;utilise souvent depuis quelques mois. Supposons que pour améliorer l&rsquo;apparence de votre application, vous ayez créé des styles personnalisés pour les contrôles standards : Bon, je ne suis pas designer, hein&hellip; mais ça fera parfaitement l&rsquo;affaire pour illustrer mon propos ;). Ces styles sont très simples, ce sont les styles par défaut des CheckBox et RadioButton dans lesquels j&rsquo;ai seulement modifié les templates pour remplacer les BulletChrome par ces superbes marques bleues." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://thomaslevesque.fr/2011/09/30/wpf-creer-des-styles-parametrables-a-laide-des-proprietes-attachees/" />
<meta property="article:published_time" content="2011-09-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2011-09-30T00:00:00+00:00" />

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[WPF] Créer des styles paramétrables à l&#39;aide des propriétés attachées"/>
<meta name="twitter:description" content="Je voudrais aujourd&rsquo;hui partager avec vous une petite astuce que j&rsquo;utilise souvent depuis quelques mois. Supposons que pour améliorer l&rsquo;apparence de votre application, vous ayez créé des styles personnalisés pour les contrôles standards : Bon, je ne suis pas designer, hein&hellip; mais ça fera parfaitement l&rsquo;affaire pour illustrer mon propos ;). Ces styles sont très simples, ce sont les styles par défaut des CheckBox et RadioButton dans lesquels j&rsquo;ai seulement modifié les templates pour remplacer les BulletChrome par ces superbes marques bleues."/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/social.css">
	<link rel="shortcut icon" href="/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-31645024-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Blog .NET de Thomas Levesque" rel="home">
				<div class="logo__title">Blog .NET de Thomas Levesque</div>
				<div class="logo__tagline">Nouveautés, découvertes, réflexions, trucs, astuces en tous genres sur les technologies .NET</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/a-propos/">
				
				<span class="menu__text">À propos</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[WPF] Créer des styles paramétrables à l&#39;aide des propriétés attachées</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2011-09-30T00:00:00Z">September 30, 2011</time></div></div>
		</header><div class="content post__content clearfix">
			<p>Je voudrais aujourd&rsquo;hui partager avec vous une petite astuce que j&rsquo;utilise souvent depuis quelques mois. Supposons que pour améliorer l&rsquo;apparence de votre application, vous ayez créé des styles personnalisés pour les contrôles standards :  <img src="parameterized_styles11.png" alt="">  Bon, je ne suis pas designer, hein&hellip; mais ça fera parfaitement l&rsquo;affaire pour illustrer mon propos ;). Ces styles sont très simples, ce sont les styles par défaut des <code>CheckBox</code> et <code>RadioButton</code> dans lesquels j&rsquo;ai seulement modifié les templates pour remplacer les <code>BulletChrome</code> par ces superbes marques bleues. Voilà le code :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">        <span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;{x:Type CheckBox}&#34;</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;{x:Type CheckBox}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Foreground&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Background&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{StaticResource CheckBoxFillNormal}&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;BorderBrush&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{StaticResource CheckBoxStroke}&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;BorderThickness&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;FocusVisualStyle&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{StaticResource EmptyCheckBoxFocusVisual}&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Template&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;Setter.Value&gt;</span>
                    <span style="color:#f92672">&lt;ControlTemplate</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;{x:Type CheckBox}&#34;</span><span style="color:#f92672">&gt;</span>
                        <span style="color:#f92672">&lt;BulletDecorator</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;Transparent&#34;</span>
                                         <span style="color:#a6e22e">SnapsToDevicePixels=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
                            <span style="color:#f92672">&lt;BulletDecorator.Bullet&gt;</span>
                                <span style="color:#f92672">&lt;Border</span> <span style="color:#a6e22e">BorderBrush=</span><span style="color:#e6db74">&#34;{TemplateBinding BorderBrush}&#34;</span>
                                        <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;{TemplateBinding Background}&#34;</span>
                                        <span style="color:#a6e22e">BorderThickness=</span><span style="color:#e6db74">&#34;1&#34;</span>
                                        <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;11&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;11&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,1,0,0&#34;</span><span style="color:#f92672">&gt;</span>
                                    <span style="color:#f92672">&lt;Grid&gt;</span>
                                        <span style="color:#f92672">&lt;Path</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;TickMark&#34;</span>
                                              <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;Blue&#34;</span>
                                              <span style="color:#a6e22e">Data=</span><span style="color:#e6db74">&#34;M0,4 5,9 9,0 4,5&#34;</span>
                                              <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
                                        <span style="color:#f92672">&lt;Rectangle</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;IndeterminateMark&#34;</span>
                                                   <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;Blue&#34;</span>
                                                   <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;7&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;7&#34;</span>
                                                   <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
                                                   <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
                                                   <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
                                    <span style="color:#f92672">&lt;/Grid&gt;</span>
                                <span style="color:#f92672">&lt;/Border&gt;</span>
                            <span style="color:#f92672">&lt;/BulletDecorator.Bullet&gt;</span>
                            <span style="color:#f92672">&lt;ContentPresenter</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;{TemplateBinding HorizontalContentAlignment}&#34;</span>
                                              <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;{TemplateBinding Padding}&#34;</span>
                                              <span style="color:#a6e22e">RecognizesAccessKey=</span><span style="color:#e6db74">&#34;True&#34;</span>
                                              <span style="color:#a6e22e">SnapsToDevicePixels=</span><span style="color:#e6db74">&#34;{TemplateBinding SnapsToDevicePixels}&#34;</span>
                                              <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;{TemplateBinding VerticalContentAlignment}&#34;</span><span style="color:#f92672">/&gt;</span>
                        <span style="color:#f92672">&lt;/BulletDecorator&gt;</span>
                        <span style="color:#f92672">&lt;ControlTemplate.Triggers&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;HasContent&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;FocusVisualStyle&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{StaticResource CheckRadioFocusVisual}&#34;</span><span style="color:#f92672">/&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Padding&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;4,0,0,0&#34;</span><span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;IsEnabled&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;false&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Foreground&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}&#34;</span><span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;IsChecked&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;True&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">TargetName=</span><span style="color:#e6db74">&#34;TickMark&#34;</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Visibility&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;Visible&#34;</span> <span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;IsChecked&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{x:Null}&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">TargetName=</span><span style="color:#e6db74">&#34;IndeterminateMark&#34;</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Visibility&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;Visible&#34;</span> <span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                        <span style="color:#f92672">&lt;/ControlTemplate.Triggers&gt;</span>
                    <span style="color:#f92672">&lt;/ControlTemplate&gt;</span>
                <span style="color:#f92672">&lt;/Setter.Value&gt;</span>
            <span style="color:#f92672">&lt;/Setter&gt;</span>
        <span style="color:#f92672">&lt;/Style&gt;</span>
        <span style="color:#f92672">&lt;Style</span> <span style="color:#a6e22e">x:Key=</span><span style="color:#e6db74">&#34;{x:Type RadioButton}&#34;</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;{x:Type RadioButton}&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Foreground&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Background&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;#F4F4F4&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;BorderBrush&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{StaticResource CheckBoxStroke}&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;BorderThickness&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">/&gt;</span>
            <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Template&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;Setter.Value&gt;</span>
                    <span style="color:#f92672">&lt;ControlTemplate</span> <span style="color:#a6e22e">TargetType=</span><span style="color:#e6db74">&#34;{x:Type RadioButton}&#34;</span><span style="color:#f92672">&gt;</span>
                        <span style="color:#f92672">&lt;BulletDecorator</span> <span style="color:#a6e22e">Background=</span><span style="color:#e6db74">&#34;Transparent&#34;</span><span style="color:#f92672">&gt;</span>
                            <span style="color:#f92672">&lt;BulletDecorator.Bullet&gt;</span>
                                <span style="color:#f92672">&lt;Grid</span> <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span> <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;0,1,0,0&#34;</span><span style="color:#f92672">&gt;</span>
                                    <span style="color:#f92672">&lt;Ellipse</span> <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;11&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;11&#34;</span>
                                             <span style="color:#a6e22e">Stroke=</span><span style="color:#e6db74">&#34;{TemplateBinding BorderBrush}&#34;</span>
                                             <span style="color:#a6e22e">StrokeThickness=</span><span style="color:#e6db74">&#34;1&#34;</span>
                                             <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;{TemplateBinding Background}&#34;</span> <span style="color:#f92672">/&gt;</span>
                                    <span style="color:#f92672">&lt;Ellipse</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;TickMark&#34;</span>
                                             <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;7&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;7&#34;</span>
                                             <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;Blue&#34;</span>
                                             <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
                                    <span style="color:#f92672">&lt;Ellipse</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;IndeterminateMark&#34;</span>
                                             <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;3&#34;</span>
                                             <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;Blue&#34;</span>
                                             <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
                                <span style="color:#f92672">&lt;/Grid&gt;</span>
                            <span style="color:#f92672">&lt;/BulletDecorator.Bullet&gt;</span>
                            <span style="color:#f92672">&lt;ContentPresenter</span> <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;{TemplateBinding HorizontalContentAlignment}&#34;</span>
                                              <span style="color:#a6e22e">Margin=</span><span style="color:#e6db74">&#34;{TemplateBinding Padding}&#34;</span>
                                              <span style="color:#a6e22e">RecognizesAccessKey=</span><span style="color:#e6db74">&#34;True&#34;</span>
                                              <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;{TemplateBinding VerticalContentAlignment}&#34;</span><span style="color:#f92672">/&gt;</span>
                        <span style="color:#f92672">&lt;/BulletDecorator&gt;</span>
                        <span style="color:#f92672">&lt;ControlTemplate.Triggers&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;HasContent&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;FocusVisualStyle&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{StaticResource CheckRadioFocusVisual}&#34;</span><span style="color:#f92672">/&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Padding&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;4,0,0,0&#34;</span><span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;IsEnabled&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;false&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Foreground&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}&#34;</span><span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;IsChecked&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;True&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">TargetName=</span><span style="color:#e6db74">&#34;TickMark&#34;</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Visibility&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;Visible&#34;</span> <span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                            <span style="color:#f92672">&lt;Trigger</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;IsChecked&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;{x:Null}&#34;</span><span style="color:#f92672">&gt;</span>
                                <span style="color:#f92672">&lt;Setter</span> <span style="color:#a6e22e">TargetName=</span><span style="color:#e6db74">&#34;IndeterminateMark&#34;</span> <span style="color:#a6e22e">Property=</span><span style="color:#e6db74">&#34;Visibility&#34;</span> <span style="color:#a6e22e">Value=</span><span style="color:#e6db74">&#34;Visible&#34;</span> <span style="color:#f92672">/&gt;</span>
                            <span style="color:#f92672">&lt;/Trigger&gt;</span>
                        <span style="color:#f92672">&lt;/ControlTemplate.Triggers&gt;</span>
                    <span style="color:#f92672">&lt;/ControlTemplate&gt;</span>
                <span style="color:#f92672">&lt;/Setter.Value&gt;</span>
            <span style="color:#f92672">&lt;/Setter&gt;</span>
        <span style="color:#f92672">&lt;/Style&gt;</span>
</code></pre></div><p>Vous avez donc maintenant de magnifiques contrôles qui vont faire de l&rsquo;application un grand succès, le management est content, tout va pour le mieux dans le meilleur des mondes&hellip; Et là, vous réalisez que dans un autre écran de l&rsquo;application, les contrôles doivent avoir le même style, mais en vert !  La première solution qui vient à l&rsquo;esprit est de dupliquer le style en mettant du vert à la place du bleu. Mais comme vous êtes un bon développeur soucieux des bonnes pratiques, vous savez que la duplication de code, c&rsquo;est mal : si vous devez un jour modifier le style de la <code>CheckBox</code> bleue, il faudra aussi modifier celui de la verte&hellip; et peut-être aussi la rouge, la noire, etc. Bref, ça deviendrait vite ingérable. Il faut donc refactoriser, mais comment ? Il faudrait pouvoir passer la couleur en paramètre du style, mais un style n&rsquo;est pas une méthode à laquelle on peut passer des paramètres&hellip;  Il faudrait donc avoir une propriété supplémentaire pour indiquer la couleur des &ldquo;ticks&rdquo;, et se binder sur cette propriété dans le template. Une approche possible est de créer des contrôles personnalisés hérités de <code>CheckBox</code> et <code>RadioButton</code>, avec une propriété supplémentaire <code>TickBrush</code>&hellip; mais personnellement je n&rsquo;aime pas beaucoup cette approche : je préfère éviter de créer de nouveaux contrôles quand on peut s&rsquo;en sortir avec les contrôles standard.  En fait, il y a une solution plus simple : il suffit de créer une classe, qu&rsquo;on appelle par exemple <code>ThemeProperties</code>, et de déclarer dedans une propriété attachée de type <code>Brush</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ThemeProperties</span>
    {
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Brush GetTickBrush(DependencyObject obj)
        {
            <span style="color:#66d9ef">return</span> (Brush)obj.GetValue(TickBrushProperty);
        }

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> SetTickBrush(DependencyObject obj, Brush <span style="color:#66d9ef">value</span>)
        {
            obj.SetValue(TickBrushProperty, <span style="color:#66d9ef">value</span>);
        }

        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> DependencyProperty TickBrushProperty =
            DependencyProperty.RegisterAttached(
                <span style="color:#e6db74">&#34;TickBrush&#34;</span>,
                <span style="color:#66d9ef">typeof</span>(Brush),
                <span style="color:#66d9ef">typeof</span>(ThemeProperties),
                <span style="color:#66d9ef">new</span> FrameworkPropertyMetadata(Brushes.Black));
    }
</code></pre></div><p>On modifie un peu nos templates pour remplacer la couleur en dur par un binding sur cette propriété :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">                                ...

                                <span style="color:#75715e">&lt;!-- CheckBox --&gt;</span>
                                        <span style="color:#f92672">&lt;Path</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;TickMark&#34;</span>
                                              <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;{TemplateBinding my:ThemeProperties.TickBrush}&#34;</span>
                                              <span style="color:#a6e22e">Data=</span><span style="color:#e6db74">&#34;M0,4 5,9 9,0 4,5&#34;</span>
                                              <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
                                        <span style="color:#f92672">&lt;Rectangle</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;IndeterminateMark&#34;</span>
                                                   <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;{TemplateBinding my:ThemeProperties.TickBrush}&#34;</span>
                                                   <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;7&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;7&#34;</span>
                                                   <span style="color:#a6e22e">HorizontalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
                                                   <span style="color:#a6e22e">VerticalAlignment=</span><span style="color:#e6db74">&#34;Center&#34;</span>
                                                   <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>

                                ...

                                <span style="color:#75715e">&lt;!-- RadioButton --&gt;</span>
                                    <span style="color:#f92672">&lt;Ellipse</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;TickMark&#34;</span>
                                             <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;7&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;7&#34;</span>
                                             <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;{TemplateBinding my:ThemeProperties.TickBrush}&#34;</span>
                                             <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
                                    <span style="color:#f92672">&lt;Ellipse</span> <span style="color:#a6e22e">Name=</span><span style="color:#e6db74">&#34;IndeterminateMark&#34;</span>
                                             <span style="color:#a6e22e">Width=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">Height=</span><span style="color:#e6db74">&#34;3&#34;</span>
                                             <span style="color:#a6e22e">Fill=</span><span style="color:#e6db74">&#34;{TemplateBinding my:ThemeProperties.TickBrush}&#34;</span>
                                             <span style="color:#a6e22e">Visibility=</span><span style="color:#e6db74">&#34;Hidden&#34;</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><p>Et quand on utilise les contrôles, on précise la couleur qu&rsquo;on veut pour le tick :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;CheckBox</span> <span style="color:#a6e22e">Content=</span><span style="color:#e6db74">&#34;Checked&#34;</span> <span style="color:#a6e22e">IsChecked=</span><span style="color:#e6db74">&#34;True&#34;</span> <span style="color:#a6e22e">my:ThemeProperties.TickBrush=</span><span style="color:#e6db74">&#34;Blue&#34;</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><p>On peut donc maintenant avoir des contrôles qui partagent le même style, mais en changeant la couleur d&rsquo;un élément du template :  <img src="parameterized_styles42.png" alt="">  On a donc effectivement rendu les styles paramétrables ! Il reste cependant un petit souci : étant donné que tous les contrôles d&rsquo;un même éran utilisent tous la même couleur, il n&rsquo;est pas très pratique de devoir la répéter sur chaque contrôle. L&rsquo;idéal serait de pouvoir indiquer à la racine de la vue la couleur à utiliser pour tous les contrôles&hellip; et justement, les dependency properties (et donc les propriétés attachées) offrent une fonctionnalité qui permet de faire exactement ça : l&rsquo;héritage de valeur. Il suffit d&rsquo;indiquer le flag <code>Inherits</code> lors de la déclaration de la propriété <code>TickBrush</code> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp">        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> DependencyProperty TickBrushProperty =
            DependencyProperty.RegisterAttached(
                <span style="color:#e6db74">&#34;TickBrush&#34;</span>,
                <span style="color:#66d9ef">typeof</span>(Brush),
                <span style="color:#66d9ef">typeof</span>(ThemeProperties),
                <span style="color:#66d9ef">new</span> FrameworkPropertyMetadata(Brushes.Black, FrameworkPropertyMetadataOptions.Inherits));
</code></pre></div><p>Avec cette modification, la propriété devient &ldquo;ambiante&rdquo; : il suffit d&rsquo;indiquer sa valeur sur un contrôle parent (par exemple la racine de la vue) pour que tous les descendants prennent en compte cette valeur. On peut donc très facilement faire des écrans avec des contrôles qui partagent le même style, mais en appliquant des couleurs différentes.  Le concept peut bien sûr être étendu à d&rsquo;autres cas : en fait, dès qu&rsquo;un élément du template doit varier selon un critère arbitraire, cette technique peut s&rsquo;appliquer. Cela évite bien souvent de devoir dupliquer le template pour ne changer qu&rsquo;un petit détail.</p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/propri%C3%A9t%C3%A9-attach%C3%A9e/" rel="tag">propriété attachée</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/style/" rel="tag">style</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/template/" rel="tag">template</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/wpf/" rel="tag">WPF</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Thomas Levesque avatar" src="/images/avatar.jpg" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">À propos Thomas Levesque</span>
	</div>
	<div class="authorbox__description">
		Thomas Levesque est un développeur français vivant à Paris.
	</div>
</div>

<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/2011/09/23/wpf-4-5-abonnement-a-un-evenement-a-laide-dune-markup-extension/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Précédent</span>
			<p class="pager__title">[WPF 4.5] Abonnement à un évènement à l’aide d’une markup extension</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/2011/11/29/wpf-utiliser-linq-pour-filtrer-trier-et-grouper-les-donnes-dans-une-collectionview/" rel="next">
			<span class="pager__subtitle">Suivant&thinsp;»</span>
			<p class="pager__title">[WPF] Utiliser Linq pour filtrer, trier et grouper les données dans une CollectionView</p>
		</a>
	</div>
</nav>

<div>
    <script src="https://utteranc.es/client.js"
            repo="thomaslevesque/blog-fr"
            issue-term="pathname"
            label="post-comment"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
</div>


			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="Rechercher..." value="" name="q" aria-label="Rechercher...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="https://thomaslevesque.fr/" />
	</form>
</div>
<div class="widget-social widget">
    <h4 class="widget-social__title widget__title">Social</h4>
    <div class="widget-social__content widget__content">
        <a class="widget-social__link-custom widget__link" title="GitHub" rel="noopener noreferrer" href="https://github.com/thomaslevesque" target="_blank">
            <svg class="widget-social__link-icon-custom icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0c-106.1 0-192 85.8-192 191.7 0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2 0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8 0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7 0 0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4 0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5 0 25.6-.2 46.3-.2 52.6 0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg>
        </a>
        <a class="widget-social__link-custom widget__link" title="Twitter" rel="noopener noreferrer" href="https://twitter.com/thomaslevesque" target="_blank">
            <svg class="widget-social__link-icon-custom icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
        </a>
    </div>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Articles récents</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/2018/04/17/fin-de-mon-blog-en-francais/">Fin de mon blog en français</a></li>
			<li class="widget__item"><a class="widget__link" href="/2018/03/27/comprendre-le-pipeline-de-middleware-dasp-net-core/">Comprendre le pipeline de middleware d&#39;ASP.NET Core</a></li>
			<li class="widget__item"><a class="widget__link" href="/2018/03/06/nettoyer-lhistorique-dune-branche-git-pour-supprimer-les-fichiers-indesirables/">Nettoyer l&#39;historique d&#39;une branche Git pour supprimer les fichiers indésirables</a></li>
			<li class="widget__item"><a class="widget__link" href="/2018/02/25/meilleure-gestion-du-timeout-avec-httpclient/">Meilleure gestion du timeout avec HttpClient</a></li>
			<li class="widget__item"><a class="widget__link" href="/2017/11/14/transformer-les-templates-t4-pendant-la-build-et-passer-des-variables-du-projet/">Transformer les templates T4 pendant la build, et passer des variables du projet</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Mots-clefs</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/c%23/" title="c#">c#</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/wpf/" title="wpf">wpf</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/xaml/" title="xaml">xaml</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/visual-studio/" title="visual-studio">visual-studio</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/async/" title="async">async</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/binding/" title="binding">binding</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/markup-extension/" title="markup-extension">markup-extension</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/mvvm/" title="mvvm">mvvm</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/linq/" title="linq">linq</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/tests-unitaires/" title="tests-unitaires">tests-unitaires</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/winrt/" title="winrt">winrt</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/.net/" title=".net">.net</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/.net-4.0/" title=".net-4.0">.net-4.0</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/.net-core/" title=".net-core">.net-core</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/asynchrone/" title="asynchrone">asynchrone</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 Thomas Levesque.
			<span class="footer__copyright-credits">Produit par <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> et le thème <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a>.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>